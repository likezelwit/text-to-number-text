<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Bahasa Monyet (Encode + Decode)</title>
</head>
<body>
  <h2>Bahasa Monyet Converter</h2>

  <label>Mode:</label><br>
  <select id="mode" onchange="run()">
    <option value="encode">Encode (Text → Monyet)</option>
    <option value="decode">Decode (Monyet → Text)</option>
  </select><br><br>

  <label>Type here:</label><br>
  <textarea id="inputText" rows="3" cols="60" oninput="run()"></textarea><br><br>

  <label>Result:</label><br>
  <textarea id="output" rows="4" cols="60" readonly></textarea><br><br>

  <button onclick="copyResult()">Copy</button>
  <button onclick="clearAll()">Clear</button>

<script>
  // ===== SETS UNTUK ENCODE =====
  const vowels = new Set(['a','e','i','o','u']);
  const hard = new Set(['k','g','p','t','b','d','q']);
  const soft = new Set(['m','n','s','l','r','h']);

  function encodeChar(ch){
    if (ch === ' ') return 'u';  // space
    if (!/[a-z]/.test(ch)) return ch;
    if (vowels.has(ch)) return 'aa';
    if (soft.has(ch)) return 'u';
    if (hard.has(ch)) return 'a';
    return 'a';
  }

  function encodeMonkey(text){
    text = text.toLowerCase();
    return text.split('').map(encodeChar).join(' ');
  }

  // ===== DECODE (Monyet → Text Normal) =====
  function decodeMonkey(text){
    const parts = text.trim().split(/\s+/);
    let result = "";

    for (let token of parts){
      if (token === "aa") result += "a";
      else if (token === "u") result += " ";
      else if (token === "a") result += "k";
      else result += "?";
    }

    return result;
  }

  // ===== MAIN SWITCH =====
  function run(){
    const mode = document.getElementById("mode").value;
    const input = document.getElementById("inputText").value;

    if(mode === "encode"){
      document.getElementById("output").value = encodeMonkey(input);
    } else {
      document.getElementById("output").value = decodeMonkey(input);
    }
  }

  function copyResult(){
    const out = document.getElementById('output');
    if (!out.value) return;
    out.select();
    document.execCommand('copy');
    alert('Copied!');
  }

  function clearAll(){
    document.getElementById("inputText").value = "";
    document.getElementById("output").value = "";
  }
</script>

</body>
</html>
